import{r as o,o as p,c as r,a as n,b as e,w as t,F as i,d as s,e as l}from"./app.3a4a8f90.js";import{_ as c}from"./plugin-vue_export-helper.21dcd24c.js";var u="/microservices/installation-flow.png";const d={},m=n("h1",{id:"apps-development",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#apps-development","aria-hidden":"true"},"#"),s(" Apps development")],-1),h={class:"table-of-contents"},k=s("Introduction"),q=s("App frontend"),b=s("Requirements"),g=s("Authorization"),f=s("Installation"),y=s("Info request"),_=s("Install request"),v=s("Remove request"),x=s("Configuration"),w=s("Config get"),T=s("Config set"),I=l('<h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction" aria-hidden="true">#</a> Introduction</h2><p>Applications are a way to extend Heseya. They allow you to create entirely new functionality or integrate with external systems.</p><p>The core component of the application is its API. Through a special JSON definition, it declares what kind of microservice it is, what permissions it requires and what configuration options it has. The application (as long as it has the right permissions) has access to almost all endpoints. (omitting endpoints directly related to the user like changing passwords, etc.)</p><p>One application instance can support one or many Heseya stores. All these stores will share the same microservice code, however, each will have its own configuration.</p><h3 id="app-frontend" tabindex="-1"><a class="header-anchor" href="#app-frontend" aria-hidden="true">#</a> App frontend</h3><p>In some cases, it may be required to modify the Heseya dashboard to enable application management. Heseya use <a href="/developer/microfrontends">micro-fronts</a> to allows you to easily add any new functionality to the dashboard.</p><h3 id="requirements" tabindex="-1"><a class="header-anchor" href="#requirements" aria-hidden="true">#</a> Requirements</h3><p>The application can be written in any technology. The only requirements are, that the API be available at a Heseya-accessible URL. The app must provide several endpoints, which are described later in this document.</p><h3 id="authorization" tabindex="-1"><a class="header-anchor" href="#authorization" aria-hidden="true">#</a> Authorization</h3><p>Applications use a different authorization scheme than users. You can find <a href="/developer/authorization#app-authorization">documentation here</a>.</p><h2 id="installation" tabindex="-1"><a class="header-anchor" href="#installation" aria-hidden="true">#</a> Installation</h2><p><img src="'+u+`" alt="Installation diagram"></p><p>Important assumptions in the topic of application installation:</p><ul><li>The user can grant only those permissions that he or she has.</li><li>During installation, API creates roles that have all the internal privileges of this application; This role is automatically given to the user installing the application.</li><li>To recognize from which API the request was received, you should use the <code>X-Core-Url</code> header. If <code>IdentityToken</code> is present, it should check that the <code>claim iss</code> from the token, is the same as the header.</li></ul><h4 id="required-endpoints" tabindex="-1"><a class="header-anchor" href="#required-endpoints" aria-hidden="true">#</a> Required endpoints</h4><p>The following endpoints must be implemented.</p><h3 id="info-request" tabindex="-1"><a class="header-anchor" href="#info-request" aria-hidden="true">#</a> Info request</h3><p><code>[GET] /</code></p><p>Information about the application and the required permissions.</p><details class="custom-container details"><summary>Response</summary><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;api_version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span> <span class="token comment">// minimal api version - e.g. &#39;^3.0.0&#39;</span>
  <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span> <span class="token comment">// optional</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span> <span class="token comment">// optional</span>
  <span class="token property">&quot;licence_required&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// optional</span>
  <span class="token property">&quot;microfrontend_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span> <span class="token comment">// optional</span>
  <span class="token property">&quot;required_permissions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;optional_permissions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// optional</span>
  <span class="token property">&quot;internal_permissions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;display_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span> <span class="token comment">// optional</span>
      <span class="token property">&quot;unauthenticated&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// whether the permission should be given by default to unauthenticated users - optional</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;widgets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// optional</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></details><h3 id="install-request" tabindex="-1"><a class="header-anchor" href="#install-request" aria-hidden="true">#</a> Install request</h3><p><code>[POST] /install</code></p><details class="custom-container details"><summary>Payload</summary><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;api_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;api_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span> <span class="token comment">// optional</span>
  <span class="token property">&quot;api_version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span> <span class="token comment">// current api version - e.g. &#39;3.0.0&#39;</span>
  <span class="token property">&quot;licence_key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span> <span class="token comment">// optional</span>
  <span class="token property">&quot;integration_token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refresh_token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></details><details class="custom-container details"><summary>Response</summary><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;uninstall_token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></details><h3 id="remove-request" tabindex="-1"><a class="header-anchor" href="#remove-request" aria-hidden="true">#</a> Remove request</h3><p><code>[POST] /uninstall</code></p><p>The application recognizes the API by the token, then performs any operations associated with removing Heseya instance from its database.</p><details class="custom-container details"><summary>Payload</summary><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;uninstall_token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></details><details class="custom-container details"><summary>Response</summary><p><code>Response status: 204 No Body</code></p></details><h2 id="configuration" tabindex="-1"><a class="header-anchor" href="#configuration" aria-hidden="true">#</a> Configuration</h2><p><em>This part is fully optional.</em></p><p>Core API allows apps to have config saved simple config. For more complex configurations, we recommend the use of a micro-front.</p><h4 id="endpoints" tabindex="-1"><a class="header-anchor" href="#endpoints" aria-hidden="true">#</a> Endpoints</h4><h3 id="config-get" tabindex="-1"><a class="header-anchor" href="#config-get" aria-hidden="true">#</a> Config get</h3><p><code>[GET] /config</code></p><p>The <code>value</code> field is returned only for authorized users, while the rest of the data is available to the public.</p><details class="custom-container details"><summary>Response</summary><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;placeholder&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span> <span class="token comment">// optional</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span> <span class="token comment">// enum - text | select | number | color | date | datetime-local</span>
    <span class="token property">&quot;default_value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;any&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;any&quot;</span><span class="token punctuation">,</span> <span class="token comment">// optional</span>
    <span class="token property">&quot;required&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// optional</span>
    <span class="token property">&quot;options&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> 
        <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></details><h3 id="config-set" tabindex="-1"><a class="header-anchor" href="#config-set" aria-hidden="true">#</a> Config set</h3><p><code>[POST] /config</code></p><p>App configuration update. The object keys correspond to the <code>key</code> field returned by the endpoint.</p><details class="custom-container details"><summary>Payload</summary><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;key1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;key2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;value&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></details><details class="custom-container details"><summary>Response</summary><p><code>Response status: 204</code></p></details>`,42);function j(A,R){const a=o("RouterLink");return p(),r(i,null,[m,n("nav",h,[n("ul",null,[n("li",null,[e(a,{to:"#introduction"},{default:t(()=>[k]),_:1}),n("ul",null,[n("li",null,[e(a,{to:"#app-frontend"},{default:t(()=>[q]),_:1})]),n("li",null,[e(a,{to:"#requirements"},{default:t(()=>[b]),_:1})]),n("li",null,[e(a,{to:"#authorization"},{default:t(()=>[g]),_:1})])])]),n("li",null,[e(a,{to:"#installation"},{default:t(()=>[f]),_:1}),n("ul",null,[n("li",null,[e(a,{to:"#info-request"},{default:t(()=>[y]),_:1})]),n("li",null,[e(a,{to:"#install-request"},{default:t(()=>[_]),_:1})]),n("li",null,[e(a,{to:"#remove-request"},{default:t(()=>[v]),_:1})])])]),n("li",null,[e(a,{to:"#configuration"},{default:t(()=>[x]),_:1}),n("ul",null,[n("li",null,[e(a,{to:"#config-get"},{default:t(()=>[w]),_:1})]),n("li",null,[e(a,{to:"#config-set"},{default:t(()=>[T]),_:1})])])])])]),I],64)}var C=c(d,[["render",j]]);export{C as default};
